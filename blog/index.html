---
layout: default
title: í™ˆ
---

<div class="home">
  <section class="hero">
    <h1 class="hero-title">ì•„ê³ ë¼</h1>
    <p class="hero-subtitle">Paul Graham ì—ì„¸ì´ë¥¼ í•œêµ­ PMÂ·POÂ·ì°½ì—…ì ë§¥ë½ìœ¼ë¡œ ì¬í•´ì„í•œ ì‹¤í–‰í˜• ìê¸°ê³„ë°œ í”Œë«í¼</p>
  </section>

  <section class="filter-section">
    <h2 class="section-title">ì—ì„¸ì´ íƒìƒ‰</h2>

    <div class="filters">
      <div class="filter-group">
        <h3>ì¹´í…Œê³ ë¦¬</h3>
        <div class="filter-tags" id="category-filters">
          <button class="filter-tag active" data-filter="all">ì „ì²´</button>
          {% assign categories = site.essays | map: 'category' | uniq | sort %}
          {% for category in categories %}
          <button class="filter-tag" data-filter="{{ category }}">
            {{ site.category_names[category] | default: category }}
          </button>
          {% endfor %}
        </div>
      </div>

      <div class="filter-group">
        <h3>ë‚œì´ë„</h3>
        <div class="filter-tags" id="difficulty-filters">
          <button class="filter-tag active" data-filter="all">ì „ì²´</button>
          {% assign difficulties = site.essays | map: 'difficulty' | uniq | sort %}
          {% for difficulty in difficulties %}
          <button class="filter-tag" data-filter="{{ difficulty }}">
            {{ site.difficulty_levels[difficulty] | default: difficulty }}
          </button>
          {% endfor %}
        </div>
      </div>
    </div>
  </section>

  <section class="essays-section">
    <div class="essays-grid" id="essays-grid">
      {% assign sorted_essays = site.essays | sort: 'title' %}
      {% for essay in sorted_essays %}
      <article class="essay-card" data-category="{{ essay.category }}" data-difficulty="{{ essay.difficulty }}" data-path="{{ essay.url | relative_url }}">
        <h3 class="essay-card-title">
          <span class="bookmark-marker" style="display: none;" title="ê´€ì‹¬ ì—ì„¸ì´">ğŸ”–</span>
          <a href="{{ essay.url | relative_url }}">{{ essay.title }}</a>
        </h3>
        <div class="essay-card-meta">
          <span class="category">{{ site.category_names[essay.category] | default: essay.category }}</span>
          <span class="difficulty">{{ site.difficulty_levels[essay.difficulty] | default: essay.difficulty }}</span>
        </div>
        {% assign summary_line = "" %}
        {% assign paragraphs = essay.content | split: "\n\n" %}
        {% for para in paragraphs %}
          {% assign trimmed = para | strip %}
          {% if trimmed == "" or trimmed contains "##" %}
            {% continue %}
          {% endif %}
          {% assign cleaned = trimmed | strip_html | replace: "ìš”ì•½ (Summary)", "" | strip %}
          {% assign prefix = cleaned | slice: 0, 2 %}
          {% if prefix == "ğŸ¯" %}
            {% assign summary_line = cleaned | split: "âœ¨" | first | strip | truncate: 150 %}
            {% break %}
          {% elsif prefix == "âœ¨" %}
            {% continue %}
          {% elsif summary_line == "" %}
            {% assign summary_line = cleaned | truncate: 150 %}
          {% endif %}
        {% endfor %}
        {% if summary_line != "" %}
          <p class="essay-card-excerpt">{{ summary_line }}</p>
        {% endif %}
      </article>
      {% endfor %}
    </div>
  </section>
</div>

<script>
  // Filter functionality
  const categoryFilters = document.querySelectorAll('#category-filters .filter-tag');
  const difficultyFilters = document.querySelectorAll('#difficulty-filters .filter-tag');
  const essayCards = document.querySelectorAll('.essay-card');

  let activeCategory = 'all';
  let activeDifficulty = 'all';

  function filterEssays() {
    essayCards.forEach(card => {
      const category = card.dataset.category;
      const difficulty = card.dataset.difficulty;

      const categoryMatch = activeCategory === 'all' || category === activeCategory;
      const difficultyMatch = activeDifficulty === 'all' || difficulty === activeDifficulty;

      if (categoryMatch && difficultyMatch) {
        card.style.display = 'block';
      } else {
        card.style.display = 'none';
      }
    });
  }

  function setActive(buttons, value) {
    buttons.forEach((b) => {
      const isActive = b.dataset.filter === value;
      b.classList.toggle('active', isActive);
      b.setAttribute('aria-pressed', String(isActive));
    });
  }

  function applyQueryDefaults() {
    const params = new URLSearchParams(window.location.search);
    const catParam = params.get('category');
    const diffParam = params.get('difficulty');
    if (catParam) activeCategory = catParam;
    if (diffParam) activeDifficulty = diffParam;
    setActive(categoryFilters, activeCategory);
    setActive(difficultyFilters, activeDifficulty);
    filterEssays();
  }

  categoryFilters.forEach(button => {
    button.setAttribute('aria-pressed', button.classList.contains('active'));
    button.addEventListener('click', () => {
      activeCategory = button.dataset.filter;
      setActive(categoryFilters, activeCategory);
      filterEssays();
    });
  });

  difficultyFilters.forEach(button => {
    button.setAttribute('aria-pressed', button.classList.contains('active'));
    button.addEventListener('click', () => {
      activeDifficulty = button.dataset.filter;
      setActive(difficultyFilters, activeDifficulty);
      filterEssays();
    });
  });

  applyQueryDefaults();
  filterEssays();

  // Bookmark markers
  (function showBookmarkMarkers() {
    function getBookmarks() {
      try {
        return JSON.parse(localStorage.getItem('agora-bookmarks')) || [];
      } catch {
        return [];
      }
    }

    function updateMarkers() {
      const bookmarks = getBookmarks();
      const bookmarkedPaths = new Set(bookmarks.map(b => b.path));

      essayCards.forEach(card => {
        const path = card.dataset.path;
        const marker = card.querySelector('.bookmark-marker');

        if (marker) {
          if (bookmarkedPaths.has(path)) {
            marker.style.display = 'inline';
            card.classList.add('is-bookmarked');
          } else {
            marker.style.display = 'none';
            card.classList.remove('is-bookmarked');
          }
        }
      });
    }

    updateMarkers();
    window.addEventListener('storage', updateMarkers);
    window.addEventListener('bookmarksUpdated', updateMarkers);
  })();
</script>
